# GitLab CI/CD - Tests seulement
stages:
  - test

test-gitlab:
  stage: test
  image: php:8.1-apache
  script:
    - echo "üß™ Tests GitLab CI/CD..."
    - php --version
    - ls -la
    
    # V√©rifier structure
    - echo "=== STRUCTURE PROJET ==="
    - find . -name "*.php" | head -10
    
    # Test MySQL extensions
    - |
      php -r '
      echo "=== EXTENSIONS PHP ===\n";
      $exts = ["mysqli", "pdo_mysql", "pdo"];
      $all_ok = true;
      foreach($exts as $ext) {
        if(extension_loaded($ext)) {
          echo "‚úÖ $ext\n";
        } else {
          echo "‚ùå $ext\n";
          $all_ok = false;
        }
      }
      if($all_ok) {
        echo "\nüéâ Toutes les extensions sont pr√©sentes\n";
      }
      '
    
    - echo "‚úÖ Pipeline GitLab CI/CD r√©ussi !"
  only:
    - main